"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[989],{1989:function(e,l,s){s.r(l),s.d(l,{default:function(){return j}});var n=s(885),i=s(2791),r=s(2223),a=s(894),t=s(184);function d(e){var l=i.useState(null),s=(0,n.Z)(l,2),d=s[0],o=s[1];return i.useEffect((function(){(0,a.ph)().then((function(e){o(null===e||void 0===e?void 0:e.data)})).finally((function(){e.setLoading(!1)}))}),[]),(0,t.jsxs)(r.Zb,{className:"mb-2",children:[(0,t.jsx)("h5",{className:"text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Your Car"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:null===d?(0,t.jsx)("p",{children:"You don't have a car yet."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("b",{children:"Make:"})," ",null===d||void 0===d?void 0:d.make," ",(0,t.jsx)("b",{children:"Model:"})," ",null===d||void 0===d?void 0:d.model,(0,t.jsx)(r.Ct,{color:"warning",size:"sm",children:null===d||void 0===d?void 0:d.licensePlate})]})})]})}var o=s(5623),c=s(1258),x=s(3908),u=s(2040),h=s(71),v=s(3853),f=s(8820),m=s(1087),p=s(6208);function j(){var e=i.useState(!0),l=(0,n.Z)(e,2),s=l[0],j=l[1],g=i.useState(!0),N=(0,n.Z)(g,2),w=N[0],b=N[1],y=i.useState(!0),k=(0,n.Z)(y,2),S=k[0],C=k[1],P=i.useState(null),Z=(0,n.Z)(P,2),z=Z[0],A=Z[1],I=i.useState(null),U=(0,n.Z)(I,2),F=U[0],L=U[1],D=i.useState(!1),H=(0,n.Z)(D,2),R=H[0],X=H[1],q=i.useState(!1),E=(0,n.Z)(q,2),Y=E[0],$=E[1];i.useEffect((function(){var e=localStorage.getItem("parcelId")||null;e?(0,a.xV)(e).then((function(e){A(null===e||void 0===e?void 0:e.data)})).finally((function(){C(!1)})):C(!1)}),[]),i.useEffect((function(){z&&(0,a.Pk)(null===z||void 0===z?void 0:z.receiverAddress).then((function(e){var l;if(200===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length)>0){var s=null===e||void 0===e?void 0:e.data[0],n=s.lat,i=s.lon,r=s.display_name;L({center:{lat:parseFloat(n),lng:parseFloat(i)},name:r,sName:null===z||void 0===z?void 0:z.receiverAddress})}}))}),[z]);var _=function(e){var l=e.text;return(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"180px"},children:[(0,t.jsx)(h.UXH,{className:"w-10 h-10"}),(0,t.jsx)("p",{className:"pin-text",children:l})]})},M=function(e){$(!0);var l=localStorage.getItem("parcelId")||null;l&&(0,a.Hg)(l,{status:e}).then((function(e){200===(null===e||void 0===e?void 0:e.status)&&A(null===e||void 0===e?void 0:e.data)})).finally((function(){$(!1)}))};return(0,t.jsxs)(t.Fragment,{children:[s||w||S?(0,t.jsx)(x.a,{}):null,(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsx)(c.h,{loading:s,setLoading:j}),(0,t.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900 dark:text-white",children:"Deliveries"}),(0,t.jsx)("div",{className:"flex-wrap gap-2 grid grid-cols-1 sm:grid-cols-2",children:(0,t.jsx)(d,{loading:w,setLoading:b})}),(0,t.jsx)("h2",{className:"my-3 text-2xl font-bold text-gray-900 dark:text-white",children:"Parcel to deliver"}),z?(0,t.jsxs)("div",{className:"flex-wrap gap-2 grid grid-cols-1 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex flex-col flex-wrap gap-2",children:[(0,t.jsxs)("span",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)("b",{children:["#",null===z||void 0===z?void 0:z.parcelNumber]}),(0,t.jsx)(r.Ct,{color:"Pending"===(null===z||void 0===z?void 0:z.status)?"warning":"In progress"===(null===z||void 0===z?void 0:z.status)?"pink":"success",size:"sm",className:"text-center",children:null===z||void 0===z?void 0:z.status})]}),(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)("b",{children:"Sender:"})," ",null===z||void 0===z?void 0:z.senderName,(0,t.jsxs)("span",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("a",{href:"http://maps.google.com/?q="+(null===z||void 0===z?void 0:z.senderAddress),target:"_blank",rel:"noreferrer",children:(0,t.jsx)(h.UXH,{})}),null===z||void 0===z?void 0:z.senderAddress]}),(0,t.jsxs)("span",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("a",{href:"tel:"+(null===z||void 0===z?void 0:z.senderPhone),children:(0,t.jsx)(v.CoD,{})})," ",null===z||void 0===z?void 0:z.senderPhone]})]}),(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)("b",{children:"Receiver:"})," ",null===z||void 0===z?void 0:z.receiverName,(0,t.jsxs)("span",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("a",{href:"http://maps.google.com/?q="+(null===z||void 0===z?void 0:z.receiverAddress),target:"_blank",rel:"noreferrer",children:(0,t.jsx)(h.UXH,{})}),null===z||void 0===z?void 0:z.receiverAddress]}),(0,t.jsxs)("span",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("a",{href:"tel:"+(null===z||void 0===z?void 0:z.receiverPhone),children:(0,t.jsx)(v.CoD,{})})," ",null===z||void 0===z?void 0:z.receiverPhone]})]}),(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)("b",{children:"Weight:"})," ",null===z||void 0===z?void 0:z.weight," kg"]}),(0,t.jsxs)("span",{className:"flex flex-col",children:[(0,t.jsx)("b",{children:"Payout:"})," ",null===z||void 0===z?void 0:z.price," \u20ac"]}),(0,t.jsx)("span",{className:"flex flex-col",children:"Pending"===(null===z||void 0===z?void 0:z.status)?Y?(0,t.jsxs)(r.zx,{children:[(0,t.jsx)("div",{className:"mr-3",children:(0,t.jsx)(r.$j,{size:"sm",light:!0})}),"Loading ..."]}):(0,t.jsx)(r.zx,{onClick:function(){return M("In progress")},children:"Start delivery"}):"In progress"===(null===z||void 0===z?void 0:z.status)?Y?(0,t.jsxs)(r.zx,{color:"success",children:[(0,t.jsx)("div",{className:"mr-3",children:(0,t.jsx)(r.$j,{size:"sm",light:!0})}),"Loading ..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.zx,{color:"success",onClick:function(){return X(!0)},children:"Finish delivery"}),(0,t.jsx)(p.s,{show:R,setShow:X,onConfirm:function(){return M("Delivered")},message:"Are you sure you have finished this delivery?",confirmText:"Yes, I have",cancelText:"No, cancel",confirmColor:"success"})]}):(0,t.jsx)(r.bZ,{color:"warning",rounded:!0,icon:f.SR5,children:(0,t.jsxs)("span",{children:["Select the next parcel to deliver from ",(0,t.jsx)(m.rU,{to:"/parcels",className:"text-blue-700",children:"Parcel list"})]})})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[null!=F?(0,t.jsx)("div",{style:{width:"100%",height:"400px"},children:(0,t.jsx)(u.ZP,{bootstrapURLKeys:{key:""},defaultCenter:F.center,defaultZoom:16,children:(0,t.jsx)(_,{lat:F.center.lat,lng:F.center.lng,text:F.sName})})}):(0,t.jsx)("span",{className:"text-center",children:"Address not found on site map, please click the button below to open the map."}),(0,t.jsxs)("span",{className:"flex flex-wrap gap-2 justify-center",children:[(0,t.jsxs)(r.zx,{href:"http://maps.google.com/?q="+(null===z||void 0===z?void 0:z.receiverAddress),children:[(0,t.jsx)(h.UXH,{className:"mr-2 h-5 w-5"}),"Open location on maps"]}),(0,t.jsxs)(r.zx,{href:"tel:"+(null===z||void 0===z?void 0:z.receiverPhone),children:[(0,t.jsx)(v.CoD,{className:"mr-2 h-5 w-5"}),"Call parcel receiver"]})]})]})]}):(0,t.jsx)(r.bZ,{color:"warning",rounded:!0,icon:f.SR5,children:(0,t.jsxs)("span",{children:["No parcel to deliver, please select a parcel to deliver from ",(0,t.jsx)(m.rU,{to:"/parcels",className:"text-blue-700",children:"Parcel list"})]})}),(0,t.jsx)(o.$,{})]})]})}}}]);
//# sourceMappingURL=989.1c3c44dc.chunk.js.map