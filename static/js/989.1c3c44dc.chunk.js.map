{"version":3,"file":"static/js/989.1c3c44dc.chunk.js","mappings":"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","sources":["components/currentCar.tsx","pages/deliveries.tsx"],"sourcesContent":["import { Badge, Card } from \"flowbite-react\";\r\nimport React from \"react\";\r\nimport { getCarPersonal } from \"../utils/api\";\r\n\r\nexport default function CurrentCar(props: {\r\n  loading: boolean;\r\n  setLoading: (loading: boolean) => void;\r\n}) {\r\n  const [currentCar, setCurrentCar] = React.useState<any>(null);\r\n\r\n  React.useEffect(() => {\r\n    getCarPersonal()\r\n      .then((res) => {\r\n        setCurrentCar(res?.data);\r\n      })\r\n      .finally(() => {\r\n        props.setLoading(false);\r\n      });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <Card className=\"mb-2\">\r\n      <h5 className=\"text-2xl font-bold tracking-tight text-gray-900 dark:text-white\">\r\n        Your Car\r\n      </h5>\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {currentCar === null ? (\r\n          <p>You don't have a car yet.</p>\r\n        ) : (\r\n          <>\r\n            <b>Make:</b> {currentCar?.make} <b>Model:</b> {currentCar?.model}\r\n            <Badge color=\"warning\" size=\"sm\">\r\n              {currentCar?.licensePlate}\r\n            </Badge>\r\n          </>\r\n        )}\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport CurrentCar from \"../components/currentCar\";\r\nimport { Footer } from \"../components/footer\";\r\nimport { Header } from \"../components/header\";\r\nimport { Loader } from \"../components/loader\";\r\n// import Stats from \"../components/stats\";\r\nimport { getCoordinates, getParcel, updateParcel } from \"../utils/api\";\r\nimport GoogleMapReact from \"google-map-react\";\r\n\r\nimport { IoLocationSharp } from \"react-icons/io5\";\r\nimport { FiPhoneCall } from \"react-icons/fi\";\r\nimport { AiOutlineWarning } from \"react-icons/ai\";\r\nimport { Alert, Badge, Button, Spinner } from \"flowbite-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ConfirmModal } from \"../components/modals/confirmModal\";\r\n\r\nexport default function Deliveries() {\r\n  const [loadingHeader, setLoadingHeader] = React.useState(true);\r\n  const [loadingCar, setLoadingCar] = React.useState(true);\r\n  const [loadingParcel, setLoadingParcel] = React.useState(true);\r\n  const [parcel, setParcel] = React.useState<any>(null);\r\n  const [location, setLocation] = React.useState<any>(null);\r\n\r\n  const [showFinishDeliveryModal, setShowFinishDeliveryModal] =\r\n    React.useState(false);\r\n\r\n  const [loadingChangeStatus, setLoadingChangeStatus] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    const parcelId = localStorage.getItem(\"parcelId\") || null;\r\n    if (parcelId) {\r\n      getParcel(parcelId)\r\n        .then((res) => {\r\n          setParcel(res?.data);\r\n        })\r\n        .finally(() => {\r\n          setLoadingParcel(false);\r\n        });\r\n    } else {\r\n      setLoadingParcel(false);\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (parcel) {\r\n      getCoordinates(parcel?.receiverAddress).then((res) => {\r\n        if (res?.status === 200 && res?.data?.length > 0) {\r\n          const { lat, lon, display_name } = res?.data[0];\r\n          setLocation({\r\n            center: { lat: parseFloat(lat), lng: parseFloat(lon) },\r\n            name: display_name,\r\n            sName: parcel?.receiverAddress,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }, [parcel]);\r\n\r\n  const LocationPin = ({ text }: any) => (\r\n    <div style={{ display: \"flex\", alignItems: \"center\", width: \"180px\" }}>\r\n      <IoLocationSharp className=\"w-10 h-10\" />\r\n      <p className=\"pin-text\">{text}</p>\r\n    </div>\r\n  );\r\n\r\n  const changeStatus = (status: string) => {\r\n    setLoadingChangeStatus(true);\r\n    const parcelId = localStorage.getItem(\"parcelId\") || null;\r\n    if (parcelId) {\r\n      updateParcel(parcelId, { status })\r\n        .then((res) => {\r\n          if (res?.status === 200) {\r\n            setParcel(res?.data);\r\n          }\r\n        })\r\n        .finally(() => {\r\n          setLoadingChangeStatus(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loadingHeader || loadingCar || loadingParcel ? <Loader /> : null}\r\n      <div className=\"container mx-auto px-4\">\r\n        <Header loading={loadingHeader} setLoading={setLoadingHeader} />\r\n        <h1 className=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">\r\n          Deliveries\r\n        </h1>\r\n        <div className=\"flex-wrap gap-2 grid grid-cols-1 sm:grid-cols-2\">\r\n          <CurrentCar loading={loadingCar} setLoading={setLoadingCar} />\r\n          {/* <Stats parcel={parcel} /> */}\r\n        </div>\r\n        <h2 className=\"my-3 text-2xl font-bold text-gray-900 dark:text-white\">\r\n          Parcel to deliver\r\n        </h2>\r\n        {parcel ? (\r\n          <div className=\"flex-wrap gap-2 grid grid-cols-1 sm:grid-cols-2\">\r\n            <div className=\"flex flex-col flex-wrap gap-2\">\r\n              <span className=\"flex flex-wrap gap-2\">\r\n                <b>#{parcel?.parcelNumber}</b>\r\n                <Badge\r\n                  color={\r\n                    parcel?.status === \"Pending\"\r\n                      ? \"warning\"\r\n                      : parcel?.status === \"In progress\"\r\n                      ? \"pink\"\r\n                      : \"success\"\r\n                  }\r\n                  size=\"sm\"\r\n                  className=\"text-center\"\r\n                >\r\n                  {parcel?.status}\r\n                </Badge>\r\n              </span>\r\n              <span className=\"flex flex-col\">\r\n                <b>Sender:</b> {parcel?.senderName}\r\n                <span className=\"flex flex-wrap gap-2 items-center\">\r\n                  <a\r\n                    href={\"http://maps.google.com/?q=\" + parcel?.senderAddress}\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                  >\r\n                    <IoLocationSharp />\r\n                  </a>\r\n                  {parcel?.senderAddress}\r\n                </span>\r\n                <span className=\"flex flex-wrap gap-2 items-center\">\r\n                  <a href={\"tel:\" + parcel?.senderPhone}>\r\n                    <FiPhoneCall />\r\n                  </a>{\" \"}\r\n                  {parcel?.senderPhone}\r\n                </span>\r\n              </span>\r\n              <span className=\"flex flex-col\">\r\n                <b>Receiver:</b> {parcel?.receiverName}\r\n                <span className=\"flex flex-wrap gap-2 items-center\">\r\n                  <a\r\n                    href={\r\n                      \"http://maps.google.com/?q=\" + parcel?.receiverAddress\r\n                    }\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                  >\r\n                    <IoLocationSharp />\r\n                  </a>\r\n                  {parcel?.receiverAddress}\r\n                </span>\r\n                <span className=\"flex flex-wrap gap-2 items-center\">\r\n                  <a href={\"tel:\" + parcel?.receiverPhone}>\r\n                    <FiPhoneCall />\r\n                  </a>{\" \"}\r\n                  {parcel?.receiverPhone}\r\n                </span>\r\n              </span>\r\n              <span className=\"flex flex-col\">\r\n                <b>Weight:</b> {parcel?.weight} kg\r\n              </span>\r\n              <span className=\"flex flex-col\">\r\n                <b>Payout:</b> {parcel?.price} â‚¬\r\n              </span>\r\n              <span className=\"flex flex-col\">\r\n                {parcel?.status === \"Pending\" ? (\r\n                  loadingChangeStatus ? (\r\n                    <Button>\r\n                      <div className=\"mr-3\">\r\n                        <Spinner size=\"sm\" light={true} />\r\n                      </div>\r\n                      Loading ...\r\n                    </Button>\r\n                  ) : (\r\n                    <Button onClick={() => changeStatus(\"In progress\")}>\r\n                      Start delivery\r\n                    </Button>\r\n                  )\r\n                ) : parcel?.status === \"In progress\" ? (\r\n                  loadingChangeStatus ? (\r\n                    <Button color=\"success\">\r\n                      <div className=\"mr-3\">\r\n                        <Spinner size=\"sm\" light={true} />\r\n                      </div>\r\n                      Loading ...\r\n                    </Button>\r\n                  ) : (\r\n                    <>\r\n                      <Button\r\n                        color=\"success\"\r\n                        onClick={() => setShowFinishDeliveryModal(true)}\r\n                      >\r\n                        Finish delivery\r\n                      </Button>\r\n\r\n                      <ConfirmModal\r\n                        show={showFinishDeliveryModal}\r\n                        setShow={setShowFinishDeliveryModal}\r\n                        onConfirm={() => changeStatus(\"Delivered\")}\r\n                        message={\r\n                          \"Are you sure you have finished this delivery?\"\r\n                        }\r\n                        confirmText={\"Yes, I have\"}\r\n                        cancelText={\"No, cancel\"}\r\n                        confirmColor=\"success\"\r\n                      />\r\n                    </>\r\n                  )\r\n                ) : (\r\n                  <Alert color=\"warning\" rounded={true} icon={AiOutlineWarning}>\r\n                    <span>\r\n                      {\"Select the next parcel to deliver from \"}\r\n                      <Link to=\"/parcels\" className=\"text-blue-700\">\r\n                        Parcel list\r\n                      </Link>\r\n                    </span>\r\n                  </Alert>\r\n                )}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex flex-col gap-2\">\r\n              {location != null ? (\r\n                <div style={{ width: \"100%\", height: \"400px\" }}>\r\n                  <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: \"\" }}\r\n                    defaultCenter={location.center}\r\n                    defaultZoom={16}\r\n                  >\r\n                    <LocationPin\r\n                      lat={location.center.lat}\r\n                      lng={location.center.lng}\r\n                      text={location.sName}\r\n                    />\r\n                  </GoogleMapReact>\r\n                </div>\r\n              ) : (\r\n                <span className=\"text-center\">\r\n                  Address not found on site map, please click the button below\r\n                  to open the map.\r\n                </span>\r\n              )}\r\n              <span className=\"flex flex-wrap gap-2 justify-center\">\r\n                <Button\r\n                  href={\"http://maps.google.com/?q=\" + parcel?.receiverAddress}\r\n                >\r\n                  <IoLocationSharp className=\"mr-2 h-5 w-5\" />\r\n                  Open location on maps\r\n                </Button>\r\n                <Button href={\"tel:\" + parcel?.receiverPhone}>\r\n                  <FiPhoneCall className=\"mr-2 h-5 w-5\" />\r\n                  Call parcel receiver\r\n                </Button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Alert color=\"warning\" rounded={true} icon={AiOutlineWarning}>\r\n            <span>\r\n              {\"No parcel to deliver, please select a parcel to deliver from \"}\r\n              <Link to=\"/parcels\" className=\"text-blue-700\">\r\n                Parcel list\r\n              </Link>\r\n            </span>\r\n          </Alert>\r\n        )}\r\n        <Footer />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["CurrentCar","props","React","currentCar","setCurrentCar","getCarPersonal","then","res","data","finally","setLoading","className","make","model","color","size","licensePlate","Deliveries","loadingHeader","setLoadingHeader","loadingCar","setLoadingCar","loadingParcel","setLoadingParcel","parcel","setParcel","location","setLocation","showFinishDeliveryModal","setShowFinishDeliveryModal","loadingChangeStatus","setLoadingChangeStatus","parcelId","localStorage","getItem","getParcel","getCoordinates","receiverAddress","status","length","lat","lon","display_name","center","parseFloat","lng","name","sName","LocationPin","text","style","display","alignItems","width","changeStatus","updateParcel","loading","parcelNumber","senderName","href","senderAddress","target","rel","senderPhone","receiverName","receiverPhone","weight","price","light","onClick","show","setShow","onConfirm","message","confirmText","cancelText","confirmColor","rounded","icon","AiOutlineWarning","to","height","bootstrapURLKeys","key","defaultCenter","defaultZoom"],"sourceRoot":""}